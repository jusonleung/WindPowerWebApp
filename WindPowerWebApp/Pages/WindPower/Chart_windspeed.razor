@inject SqlDbService sqlDbService

@page "/chart/windspeed"

<PageTitle>Chart over Wind Speed</PageTitle>

<Tabs>
    <TabPane Key="1">
        <TabTemplate>Generator Power</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Power_generatorWindSpeedConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="2">
        <TabTemplate>Generator Voltage</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Voltage_generatorWindSpeedConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="3">
        <TabTemplate>Generator Current</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Current_generatorWindSpeedConfig" />
        </ChildContent>
    </TabPane>

    <TabPane Key="4">
        <TabTemplate>Inverter Power</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Power_inverterWindSpeedConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="5">
        <TabTemplate>Inverter Voltage</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Voltage_inverterWindSpeedConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="6">
        <TabTemplate>Inverter Current</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Current_inverterWindSpeedConfig" />
        </ChildContent>
    </TabPane>

    <TabPane Key="7">
        <TabTemplate>RPM</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="RpmWindSpeedConfig" />
        </ChildContent>
    </TabPane>
</Tabs>

@code {
    List<DataModelForChart> WindTurbineData;

    protected override void OnInitialized()
    {
        List<DataModel> RawData = sqlDbService.GetAllSystemData();
        WindTurbineData = RawData.Select(d => new DataModelForChart(d)).ToList();
    }

    readonly ScatterConfig Power_generatorWindSpeedConfig = new ScatterConfig
        {
            XField = "windSpeed",
            YField = "power_generator",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };

    readonly ScatterConfig Voltage_generatorWindSpeedConfig = new ScatterConfig
        {
            XField = "windSpeed",
            YField = "voltage_generator",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };

    readonly ScatterConfig Current_generatorWindSpeedConfig = new ScatterConfig
        {
            XField = "windSpeed",
            YField = "current_generator",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };

    readonly ScatterConfig Power_inverterWindSpeedConfig = new ScatterConfig
        {
            XField = "windSpeed",
            YField = "power_inverter",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };


    readonly ScatterConfig Voltage_inverterWindSpeedConfig = new ScatterConfig
        {
            XField = "windSpeed",
            YField = "voltage_inverter",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };

    readonly ScatterConfig Current_inverterWindSpeedConfig = new ScatterConfig
        {
            XField = "windSpeed",
            YField = "current_inverter",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };

    readonly ScatterConfig RpmWindSpeedConfig = new ScatterConfig
        {
            XField = "windSpeed",
            YField = "rpm",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };
}
