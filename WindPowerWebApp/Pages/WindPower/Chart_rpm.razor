@inject SqlDbService sqlDbService

@page "/chart/rpm"

<PageTitle>Chart over RPM</PageTitle>

<Tabs>
    <TabPane Key="1">
        <TabTemplate>Generator Power</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Power_generatorRPMConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="2">
        <TabTemplate>Generator Voltage</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Voltage_generatorRPMConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="3">
        <TabTemplate>Generator Current</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Current_generatorRPMConfig" />
        </ChildContent>
    </TabPane>

    <TabPane Key="4">
        <TabTemplate>Inverter Power</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Power_inverterRPMConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="5">
        <TabTemplate>Inverter Voltage</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Voltage_inverterRPMConfig" />
        </ChildContent>
    </TabPane>
    <TabPane Key="6">
        <TabTemplate>Inverter Current</TabTemplate>
        <ChildContent>
            <Scatter Data="WindTurbineData" Config="Current_inverterRPMConfig" />
        </ChildContent>
    </TabPane>
</Tabs>

@code {
    List<DataModelForChart> WindTurbineData;

    protected override void OnInitialized()
    {
        List<DataModel> RawData = sqlDbService.GetAllSystemData();
        WindTurbineData = RawData.Select(d => new DataModelForChart(d)).ToList();
    }

    readonly ScatterConfig Power_generatorRPMConfig = new ScatterConfig
        {
            XField = "rpm",
            YField = "power_generator",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };


    readonly ScatterConfig Voltage_generatorRPMConfig = new ScatterConfig
        {
            XField = "rpm",
            YField = "voltage_generator",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };

    readonly ScatterConfig Current_generatorRPMConfig = new ScatterConfig
        {
            XField = "rpm",
            YField = "current_generator",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };

    readonly ScatterConfig Power_inverterRPMConfig = new ScatterConfig
        {
            XField = "rpm",
            YField = "power_inverter",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };


    readonly ScatterConfig Voltage_inverterRPMConfig = new ScatterConfig
        {
            XField = "rpm",
            YField = "voltage_inverter",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };

    readonly ScatterConfig Current_inverterRPMConfig = new ScatterConfig
        {
            XField = "rpm",
            YField = "current_inverter",
            AutoFit = true,
            PointStyle = new GraphicStyle
            {
                Stroke = "#777777",
                LineWidth = 1,
                Fill = "#5B8FF9",
            }
        };
}
